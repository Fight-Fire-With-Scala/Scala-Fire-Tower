<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1064px" preserveAspectRatio="none" style="width:1351px;height:1064px;" version="1.1" viewBox="0 0 1351 1064" width="1351px" zoomAndPan="magnify"><defs><filter height="300%" id="f11hu9x1hybzhw" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--cluster view.gameboard.grid--><polygon fill="#FFFFFF" filter="url(#f11hu9x1hybzhw)" points="22,23.6,180.3125,23.6,187.3125,48.6679,1329,48.6679,1329,1052,22,1052,22,23.6" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="22" x2="187.3125" y1="48.6679" y2="48.6679"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="152.3125" x="26" y="40.5659">view.gameboard.grid</text><!--class GridComponent--><rect fill="#FEFECE" filter="url(#f11hu9x1hybzhw)" height="167.8551" id="GridComponent" style="stroke: #A80036; stroke-width: 1.5;" width="503" x="676.5" y="61.6"/><ellipse cx="879.25" cy="77.6" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M879.3594,73.1313 Q878.4375,73.1313 877.7031,73.4438 Q876.9844,73.7563 876.4844,74.35 Q875.9844,74.9281 875.7031,75.8031 Q875.4375,76.6781 875.4375,77.7719 Q875.4375,79.2094 875.875,80.2563 Q876.3281,81.3031 877.1719,81.85 Q878.0313,82.3969 879.3438,82.3969 Q880.125,82.3969 880.8125,82.2719 Q881.5156,82.1313 882.5156,81.8188 L882.5156,83.6938 Q881.6563,84.0219 880.8906,84.1469 Q880.1406,84.2719 879.125,84.2719 Q877.2031,84.2719 875.8906,83.475 Q874.5938,82.6625 873.9375,81.1938 Q873.2813,79.7094 873.2813,77.7406 Q873.2813,76.3188 873.6719,75.1469 Q874.0781,73.9594 874.8594,73.0844 Q875.6406,72.2094 876.7813,71.7406 Q877.9219,71.2563 879.3906,71.2563 Q880.3438,71.2563 881.2344,71.4594 Q882.1406,71.6469 883.0781,72.1156 L882.25,73.8969 Q881.4688,73.5219 880.8125,73.3344 Q880.1563,73.1313 879.3594,73.1313 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="89" x="899.75" y="82.256">GridComponent</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="677.5" x2="1178.5" y1="93.6" y2="93.6"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="684.5" y="103.5909"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="109" x="696.5" y="109.3589">container: StackPane</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="684.5" y="118.5728"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="127" x="696.5" y="124.3408">gamePhase: GamePhase</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="684.5" y="133.5547"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="251" x="696.5" y="139.3227">squareMap: mutable.Map[Position, GridSquare]</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="684.5" y="148.5366"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="193" x="696.5" y="154.3046">gridEventHandler: GridEventHandler</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="677.5" x2="1178.5" y1="161.5276" y2="161.5276"/><ellipse cx="687.5" cy="174.5185" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="405" x="696.5" y="177.2865">setAvailablePatterns(patterns: Set[Map[Position, Token]], cardEffect: Int): Unit</text><ellipse cx="687.5" cy="189.5004" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="108" x="696.5" y="192.2684">onEnableView(): Unit</text><ellipse cx="687.5" cy="204.4823" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="111" x="696.5" y="207.2502">onDisableView(): Unit</text><ellipse cx="687.5" cy="219.4642" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="477" x="696.5" y="222.2321">updateGrid(grid: Grid, currentTowerPositions: Set[Position], gamePhase: GamePhase): Unit</text><!--class GridEventHandler--><rect fill="#FEFECE" filter="url(#f11hu9x1hybzhw)" height="167.8551" id="GridEventHandler" style="stroke: #A80036; stroke-width: 1.5;" width="535" x="393.5" y="289.45"/><ellipse cx="606.75" cy="305.45" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M606.8594,300.9813 Q605.9375,300.9813 605.2031,301.2938 Q604.4844,301.6063 603.9844,302.2 Q603.4844,302.7781 603.2031,303.6531 Q602.9375,304.5281 602.9375,305.6219 Q602.9375,307.0594 603.375,308.1063 Q603.8281,309.1531 604.6719,309.7 Q605.5313,310.2469 606.8438,310.2469 Q607.625,310.2469 608.3125,310.1219 Q609.0156,309.9813 610.0156,309.6688 L610.0156,311.5438 Q609.1563,311.8719 608.3906,311.9969 Q607.6406,312.1219 606.625,312.1219 Q604.7031,312.1219 603.3906,311.325 Q602.0938,310.5125 601.4375,309.0438 Q600.7813,307.5594 600.7813,305.5906 Q600.7813,304.1688 601.1719,302.9969 Q601.5781,301.8094 602.3594,300.9344 Q603.1406,300.0594 604.2813,299.5906 Q605.4219,299.1063 606.8906,299.1063 Q607.8438,299.1063 608.7344,299.3094 Q609.6406,299.4969 610.5781,299.9656 L609.75,301.7469 Q608.9688,301.3719 608.3125,301.1844 Q607.6563,300.9813 606.8594,300.9813 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="100" x="627.25" y="310.106">GridEventHandler</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="394.5" x2="927.5" y1="321.45" y2="321.45"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="401.5" y="331.4409"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="103" x="413.5" y="337.2089">gridState: GridState</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="401.5" y="346.4228"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="159" x="413.5" y="352.1908">clickHandler: GridClickHandler</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="401.5" y="361.4047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="176" x="413.5" y="367.1727">hoverHandler: GridHoverHandler</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="394.5" x2="927.5" y1="374.3957" y2="374.3957"/><ellipse cx="404.5" cy="387.3866" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="259" x="413.5" y="390.1546">updateGamePhase(gamePhase: GamePhase): Unit</text><ellipse cx="404.5" cy="402.3685" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="317" x="413.5" y="405.1365">updateAvailablePatterns(ap: Set[Map[Position, Token]]): Unit</text><ellipse cx="404.5" cy="417.3504" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="178" x="413.5" y="420.1184">setEffectCode(cardEffect: Int): Unit</text><ellipse cx="404.5" cy="432.3323" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="330" x="413.5" y="435.1002">handleCellClick(row: Int, col: Int, gamePhase: GamePhase): Unit</text><ellipse cx="404.5" cy="447.3142" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="509" x="413.5" y="450.0821">handleCellHover(row: Int, col: Int, hoverDirection: HoverDirection, gamePhase: GamePhase): Unit</text><!--class GridState--><rect fill="#FEFECE" filter="url(#f11hu9x1hybzhw)" height="137.8913" id="GridState" style="stroke: #A80036; stroke-width: 1.5;" width="277" x="37.5" y="517.31"/><ellipse cx="145.25" cy="533.31" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M145.3594,528.8413 Q144.4375,528.8413 143.7031,529.1538 Q142.9844,529.4663 142.4844,530.06 Q141.9844,530.6381 141.7031,531.5131 Q141.4375,532.3881 141.4375,533.4819 Q141.4375,534.9194 141.875,535.9663 Q142.3281,537.0131 143.1719,537.56 Q144.0313,538.1069 145.3438,538.1069 Q146.125,538.1069 146.8125,537.9819 Q147.5156,537.8413 148.5156,537.5288 L148.5156,539.4038 Q147.6563,539.7319 146.8906,539.8569 Q146.1406,539.9819 145.125,539.9819 Q143.2031,539.9819 141.8906,539.185 Q140.5938,538.3725 139.9375,536.9038 Q139.2813,535.4194 139.2813,533.4506 Q139.2813,532.0288 139.6719,530.8569 Q140.0781,529.6694 140.8594,528.7944 Q141.6406,527.9194 142.7813,527.4506 Q143.9219,526.9663 145.3906,526.9663 Q146.3438,526.9663 147.2344,527.1694 Q148.1406,527.3569 149.0781,527.8256 L148.25,529.6069 Q147.4688,529.2319 146.8125,529.0444 Q146.1563,528.8413 145.3594,528.8413 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="53" x="165.75" y="537.966">GridState</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="38.5" x2="313.5" y1="549.31" y2="549.31"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="45.5" y="559.3009"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="251" x="57.5" y="565.0689">squareMap: mutable.Map[Position, GridSquare]</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="45.5" y="574.2828"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="229" x="57.5" y="580.0508">hoveredCells: mutable.Map[Position, Color]</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="45.5" y="589.2647"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="232" x="57.5" y="595.0327">availablePatterns: Set[Map[Position, Token]]</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="45.5" y="604.2466"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="77" x="57.5" y="610.0146">effectCode: Int</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="45.5" y="619.2285"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="167" x="57.5" y="624.9965">currentGamePhase: GamePhase</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="38.5" x2="313.5" y1="632.2194" y2="632.2194"/><ellipse cx="48.5" cy="645.2104" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="126" x="57.5" y="647.9784">resetHoverColors(): Unit</text><!--class GridClickHandler--><rect fill="#FEFECE" filter="url(#f11hu9x1hybzhw)" height="107.9276" id="GridClickHandler" style="stroke: #A80036; stroke-width: 1.5;" width="356" x="349" y="532.29"/><ellipse cx="475.25" cy="548.29" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M475.3594,543.8213 Q474.4375,543.8213 473.7031,544.1338 Q472.9844,544.4463 472.4844,545.04 Q471.9844,545.6181 471.7031,546.4931 Q471.4375,547.3681 471.4375,548.4619 Q471.4375,549.8994 471.875,550.9463 Q472.3281,551.9931 473.1719,552.54 Q474.0313,553.0869 475.3438,553.0869 Q476.125,553.0869 476.8125,552.9619 Q477.5156,552.8213 478.5156,552.5088 L478.5156,554.3838 Q477.6563,554.7119 476.8906,554.8369 Q476.1406,554.9619 475.125,554.9619 Q473.2031,554.9619 471.8906,554.165 Q470.5938,553.3525 469.9375,551.8838 Q469.2813,550.3994 469.2813,548.4306 Q469.2813,547.0088 469.6719,545.8369 Q470.0781,544.6494 470.8594,543.7744 Q471.6406,542.8994 472.7813,542.4306 Q473.9219,541.9463 475.3906,541.9463 Q476.3438,541.9463 477.2344,542.1494 Q478.1406,542.3369 479.0781,542.8056 L478.25,544.5869 Q477.4688,544.2119 476.8125,544.0244 Q476.1563,543.8213 475.3594,543.8213 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="95" x="495.75" y="552.946">GridClickHandler</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="350" x2="704" y1="564.29" y2="564.29"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="357" y="574.2809"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="165" x="369" y="580.0489">observableSubject: ViewSubject</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="357" y="589.2628"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="251" x="369" y="595.0308">squareMap: mutable.Map[Position, GridSquare]</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="357" y="604.2447"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="103" x="369" y="610.0127">gridState: GridState</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="350" x2="704" y1="617.2357" y2="617.2357"/><ellipse cx="360" cy="630.2266" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="330" x="369" y="632.9946">handleCellClick(row: Int, col: Int, gamePhase: GamePhase): Unit</text><!--class GridHoverHandler--><rect fill="#FEFECE" filter="url(#f11hu9x1hybzhw)" height="92.9457" id="GridHoverHandler" style="stroke: #A80036; stroke-width: 1.5;" width="535" x="740.5" y="539.78"/><ellipse cx="952.25" cy="555.78" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M952.3594,551.3113 Q951.4375,551.3113 950.7031,551.6238 Q949.9844,551.9363 949.4844,552.53 Q948.9844,553.1081 948.7031,553.9831 Q948.4375,554.8581 948.4375,555.9519 Q948.4375,557.3894 948.875,558.4363 Q949.3281,559.4831 950.1719,560.03 Q951.0313,560.5769 952.3438,560.5769 Q953.125,560.5769 953.8125,560.4519 Q954.5156,560.3113 955.5156,559.9988 L955.5156,561.8738 Q954.6563,562.2019 953.8906,562.3269 Q953.1406,562.4519 952.125,562.4519 Q950.2031,562.4519 948.8906,561.655 Q947.5938,560.8425 946.9375,559.3738 Q946.2813,557.8894 946.2813,555.9206 Q946.2813,554.4988 946.6719,553.3269 Q947.0781,552.1394 947.8594,551.2644 Q948.6406,550.3894 949.7813,549.9206 Q950.9219,549.4363 952.3906,549.4363 Q953.3438,549.4363 954.2344,549.6394 Q955.1406,549.8269 956.0781,550.2956 L955.25,552.0769 Q954.4688,551.7019 953.8125,551.5144 Q953.1563,551.3113 952.3594,551.3113 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="103" x="972.75" y="560.436">GridHoverHandler</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="741.5" x2="1274.5" y1="571.78" y2="571.78"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="748.5" y="581.7709"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="251" x="760.5" y="587.5389">squareMap: mutable.Map[Position, GridSquare]</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="748.5" y="596.7528"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="103" x="760.5" y="602.5208">gridState: GridState</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="741.5" x2="1274.5" y1="609.7438" y2="609.7438"/><ellipse cx="751.5" cy="622.7347" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="509" x="760.5" y="625.5027">handleCellHover(row: Int, col: Int, hoverDirection: HoverDirection, gamePhase: GamePhase): Unit</text><!--class GridSquare--><rect fill="#FEFECE" filter="url(#f11hu9x1hybzhw)" height="212.8008" id="GridSquare" style="stroke: #A80036; stroke-width: 1.5;" width="246" x="885" y="715.2"/><ellipse cx="971.75" cy="731.2" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M971.8594,726.7313 Q970.9375,726.7313 970.2031,727.0438 Q969.4844,727.3563 968.9844,727.95 Q968.4844,728.5281 968.2031,729.4031 Q967.9375,730.2781 967.9375,731.3719 Q967.9375,732.8094 968.375,733.8563 Q968.8281,734.9031 969.6719,735.45 Q970.5313,735.9969 971.8438,735.9969 Q972.625,735.9969 973.3125,735.8719 Q974.0156,735.7313 975.0156,735.4188 L975.0156,737.2938 Q974.1563,737.6219 973.3906,737.7469 Q972.6406,737.8719 971.625,737.8719 Q969.7031,737.8719 968.3906,737.075 Q967.0938,736.2625 966.4375,734.7938 Q965.7813,733.3094 965.7813,731.3406 Q965.7813,729.9188 966.1719,728.7469 Q966.5781,727.5594 967.3594,726.6844 Q968.1406,725.8094 969.2813,725.3406 Q970.4219,724.8563 971.8906,724.8563 Q972.8438,724.8563 973.7344,725.0594 Q974.6406,725.2469 975.5781,725.7156 L974.75,727.4969 Q973.9688,727.1219 973.3125,726.9344 Q972.6563,726.7313 971.8594,726.7313 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="64" x="992.25" y="735.856">GridSquare</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="886" x2="1130" y1="747.2" y2="747.2"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="893" y="757.1909"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="42" x="905" y="762.9589">row: Int</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="893" y="772.1728"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="36" x="905" y="777.9408">col: Int</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="893" y="787.1547"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="63" x="905" y="792.9227">size: Double</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="893" y="802.1366"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="100" x="905" y="807.9046">squareColor: Color</text><ellipse cx="896" cy="820.1185" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="81" x="905" y="822.8865">getColor: Color</text><ellipse cx="896" cy="835.1004" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="116" x="905" y="837.8684">getGraphicPane: Pane</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="886" x2="1130" y1="845.0913" y2="845.0913"/><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="893" y="855.0823"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="220" x="905" y="860.8502">onHover: (Int, Int, HoverDirection) =&gt; Unit</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="893" y="870.0642"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="126" x="905" y="875.8321">onClick: (Int, Int) =&gt; Unit</text><ellipse cx="896" cy="888.046" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="94" x="905" y="890.814">enableView(): Unit</text><ellipse cx="896" cy="903.0279" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="96" x="905" y="905.7959">disableView(): Unit</text><ellipse cx="896" cy="918.0098" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="162" x="905" y="920.7778">updateColor(color: Color): Unit</text><!--class ICanBeDisabled--><rect fill="#FEFECE" filter="url(#f11hu9x1hybzhw)" height="48" id="ICanBeDisabled" style="stroke: #A80036; stroke-width: 1.5;" width="122" x="947" y="988"/><ellipse cx="962" cy="1004" fill="#ADD8E6" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M963.0156,1011.25 L960.9688,1011.25 L960.9688,1000.4531 L957.1719,1000.4531 L957.1719,998.5781 L966.7969,998.5781 L966.7969,1000.4531 L963.0156,1000.4531 L963.0156,1011.25 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="90" x="976" y="1008.656">ICanBeDisabled</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="948" x2="1068" y1="1020" y2="1020"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="948" x2="1068" y1="1028" y2="1028"/><!--link GridComponent to GridEventHandler--><path d="M829.72,229.66 C808.43,247.67 785.85,266.77 764.37,284.94 " fill="none" id="GridComponent-GridEventHandler" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="760.68,288.06,770.1338,285.2985,764.4964,284.8296,764.9652,279.1923,760.68,288.06" style="stroke: #A80036; stroke-width: 1.0;"/><!--link GridEventHandler to GridState--><path d="M469.19,457.67 C424.18,477.23 376.4,497.99 332,517.31 C328.18,518.97 324.3,520.66 320.39,522.36 " fill="none" id="GridEventHandler-GridState" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="316.03,524.26,325.8784,524.3543,320.6183,522.2732,322.6995,517.0131,316.03,524.26" style="stroke: #A80036; stroke-width: 1.0;"/><!--link GridEventHandler to GridClickHandler--><path d="M608.04,457.72 C593.41,480.75 577.84,505.26 564.29,526.56 " fill="none" id="GridEventHandler-GridClickHandler" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="561.71,530.63,569.9118,525.1774,564.3907,526.4093,563.1587,520.8883,561.71,530.63" style="stroke: #A80036; stroke-width: 1.0;"/><!--link GridEventHandler to GridHoverHandler--><path d="M798.14,457.72 C842.02,484.39 889.14,513.02 927.59,536.39 " fill="none" id="GridEventHandler-GridHoverHandler" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="931.43,538.72,925.822,530.6237,927.159,536.1203,921.6624,537.4573,931.43,538.72" style="stroke: #A80036; stroke-width: 1.0;"/><!--link GridComponent to GridSquare--><path d="M1049.95,229.61 C1135.89,296.09 1244.04,397.78 1293,517.31 C1316.23,574.02 1323.58,602.09 1293,655.2 C1259.12,714.03 1195.41,753.86 1136.8,779.67 " fill="none" id="GridComponent-GridSquare" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1132.54,781.52,1142.3884,781.6143,1137.1283,779.5332,1139.2095,774.2731,1132.54,781.52" style="stroke: #A80036; stroke-width: 1.0;"/><!--link GridClickHandler to GridSquare--><path d="M637.05,640.64 C709.22,675.65 803.87,721.57 879.49,758.26 " fill="none" id="GridClickHandler-GridSquare" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="883.54,760.22,877.192,752.6898,879.0425,758.0355,873.6968,759.8859,883.54,760.22" style="stroke: #A80036; stroke-width: 1.0;"/><!--link GridHoverHandler to GridSquare--><path d="M1008,633.08 C1008,654.83 1008,681.86 1008,708.57 " fill="none" id="GridHoverHandler-GridSquare" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1008,713.47,1012,704.47,1008,708.47,1004,704.47,1008,713.47" style="stroke: #A80036; stroke-width: 1.0;"/><!--link GridSquare to ICanBeDisabled--><path d="M1008,928.36 C1008,941.61 1008,954.55 1008,966.11 " fill="none" id="GridSquare-ICanBeDisabled" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="1015,966.04,1008,986.04,1001,966.04,1015,966.04" style="stroke: #A80036; stroke-width: 1.0;"/><!--
@startuml

package view.gameboard.grid {
  class GridComponent {
    - container: StackPane
    - gamePhase: GamePhase
    - squareMap: mutable.Map[Position, GridSquare]
    - gridEventHandler: GridEventHandler
    + setAvailablePatterns(patterns: Set[Map[Position, Token]], cardEffect: Int): Unit
    + onEnableView(): Unit
    + onDisableView(): Unit
    + updateGrid(grid: Grid, currentTowerPositions: Set[Position], gamePhase: GamePhase): Unit
  }

  class GridEventHandler {
    - gridState: GridState
    - clickHandler: GridClickHandler
    - hoverHandler: GridHoverHandler
    + updateGamePhase(gamePhase: GamePhase): Unit
    + updateAvailablePatterns(ap: Set[Map[Position, Token]]): Unit
    + setEffectCode(cardEffect: Int): Unit
    + handleCellClick(row: Int, col: Int, gamePhase: GamePhase): Unit
    + handleCellHover(row: Int, col: Int, hoverDirection: HoverDirection, gamePhase: GamePhase): Unit
  }

  class GridState {
    - squareMap: mutable.Map[Position, GridSquare]
    - hoveredCells: mutable.Map[Position, Color]
    - availablePatterns: Set[Map[Position, Token]]
    - effectCode: Int
    - currentGamePhase: GamePhase
    + resetHoverColors(): Unit
  }

  class GridClickHandler {
    - observableSubject: ViewSubject
    - squareMap: mutable.Map[Position, GridSquare]
    - gridState: GridState
    + handleCellClick(row: Int, col: Int, gamePhase: GamePhase): Unit
  }

  class GridHoverHandler {
    - squareMap: mutable.Map[Position, GridSquare]
    - gridState: GridState
    + handleCellHover(row: Int, col: Int, hoverDirection: HoverDirection, gamePhase: GamePhase): Unit
  }

  class GridSquare {
    - row: Int
    - col: Int
    - size: Double
    - squareColor: Color
    - onHover: (Int, Int, HoverDirection) => Unit
    - onClick: (Int, Int) => Unit
    + enableView(): Unit
    + disableView(): Unit
    + updateColor(color: Color): Unit
    + getColor: Color
    + getGraphicPane: Pane
  }

  class ICanBeDisabled << (T,lightblue)>>{
    }

}

GridComponent - -> GridEventHandler
GridEventHandler - -> GridState
GridEventHandler - -> GridClickHandler
GridEventHandler - -> GridHoverHandler
GridComponent - -> GridSquare
GridClickHandler - -> GridSquare
GridHoverHandler - -> GridSquare
GridSquare ..|> ICanBeDisabled

@enduml

PlantUML version 1.2019.06(Fri May 24 19:10:25 CEST 2019)
(APACHE source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 21.0.3+9-LTS
Operating System: Linux
OS Version: 6.10.6-200.fc40.x86_64
Default Encoding: UTF-8
Language: it
Country: IT
--></g></svg>