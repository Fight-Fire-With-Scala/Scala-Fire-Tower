<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="641px" preserveAspectRatio="none" style="width:1570px;height:641px;" version="1.1" viewBox="0 0 1570 641" width="1570px" zoomAndPan="magnify"><defs/><g><!--cluster model.gameboard.grid--><polygon fill="#FFFFFF" points="22,23.66,192.75,23.66,199.75,48.7279,1548,48.7279,1548,629,22,629,22,23.66" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="22" x2="199.75" y1="48.7279" y2="48.7279"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="164.75" x="26" y="40.6259">model.gameboard.grid</text><!--class Grid--><rect fill="#FEFECE" height="163.5614" id="Grid" style="stroke: #A80036; stroke-width: 1.5;" width="250" x="775" y="61.66"/><ellipse cx="843.75" cy="83.0041" fill="#ADD8E6" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M844.7656,90.2541 L842.7188,90.2541 L842.7188,79.4572 L838.9219,79.4572 L838.9219,77.5822 L848.5469,77.5822 L848.5469,79.4572 L844.7656,79.4572 L844.7656,90.2541 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="108" x="862.25" y="79.4881">«companion object»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="24" x="904.25" y="95.8322">Grid</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="776" x2="1024" y1="104.3482" y2="104.3482"/><ellipse cx="786" cy="117.3392" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="124" x="795" y="120.1071">Map[Position, Cell] cells</text><ellipse cx="786" cy="132.3211" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="150" x="795" y="135.089">Map[Position, Token] tokens</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="776" x2="1024" y1="142.312" y2="142.312"/><ellipse cx="786" cy="155.3029" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="198" x="795" y="158.0709">Option[Cell] getCell(Position position)</text><ellipse cx="786" cy="170.2848" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="224" x="795" y="173.0528">Option[Token] getToken(Position position)</text><ellipse cx="786" cy="185.2667" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="200" x="795" y="188.0347">Grid setCell(Position position, Cell cell)</text><ellipse cx="786" cy="200.2486" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="218" x="795" y="203.0166">Grid setTokens((Position, Token)... tokens)</text><ellipse cx="786" cy="215.2305" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="197" x="795" y="217.9985">Grid update((Position, Cell)... updates)</text><!--class BasicGrid--><rect fill="#FEFECE" height="122.9094" id="BasicGrid" style="stroke: #A80036; stroke-width: 1.5;" width="244" x="38" y="300.2"/><ellipse cx="128.75" cy="316.2" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M128.8594,311.7313 Q127.9375,311.7313 127.2031,312.0438 Q126.4844,312.3563 125.9844,312.95 Q125.4844,313.5281 125.2031,314.4031 Q124.9375,315.2781 124.9375,316.3719 Q124.9375,317.8094 125.375,318.8563 Q125.8281,319.9031 126.6719,320.45 Q127.5313,320.9969 128.8438,320.9969 Q129.625,320.9969 130.3125,320.8719 Q131.0156,320.7313 132.0156,320.4188 L132.0156,322.2938 Q131.1563,322.6219 130.3906,322.7469 Q129.6406,322.8719 128.625,322.8719 Q126.7031,322.8719 125.3906,322.075 Q124.0938,321.2625 123.4375,319.7938 Q122.7813,318.3094 122.7813,316.3406 Q122.7813,314.9188 123.1719,313.7469 Q123.5781,312.5594 124.3594,311.6844 Q125.1406,310.8094 126.2813,310.3406 Q127.4219,309.8563 128.8906,309.8563 Q129.8438,309.8563 130.7344,310.0594 Q131.6406,310.2469 132.5781,310.7156 L131.75,312.4969 Q130.9688,312.1219 130.3125,311.9344 Q129.6563,311.7313 128.8594,311.7313 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="54" x="149.25" y="320.856">BasicGrid</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="39" x2="281" y1="332.2" y2="332.2"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="46" y="342.1909"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="129" x="58" y="347.9589">Map[Position, Cell] _cells</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="46" y="357.1728"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="155" x="58" y="362.9408">Map[Position, Token] _tokens</text><ellipse cx="49" cy="375.1547" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="124" x="58" y="377.9227">Map[Position, Cell] cells</text><ellipse cx="49" cy="390.1366" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="150" x="58" y="392.9046">Map[Position, Token] tokens</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="39" x2="281" y1="400.1276" y2="400.1276"/><ellipse cx="49" cy="413.1185" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="218" x="58" y="415.8865">Boolean isValidPosition(Position position)</text><!--class GridBuilder--><rect fill="#FEFECE" height="152.8732" id="GridBuilder" style="stroke: #A80036; stroke-width: 1.5;" width="323" x="317.5" y="285.22"/><ellipse cx="442.75" cy="301.22" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M442.8594,296.7513 Q441.9375,296.7513 441.2031,297.0638 Q440.4844,297.3763 439.9844,297.97 Q439.4844,298.5481 439.2031,299.4231 Q438.9375,300.2981 438.9375,301.3919 Q438.9375,302.8294 439.375,303.8763 Q439.8281,304.9231 440.6719,305.47 Q441.5313,306.0169 442.8438,306.0169 Q443.625,306.0169 444.3125,305.8919 Q445.0156,305.7513 446.0156,305.4388 L446.0156,307.3138 Q445.1563,307.6419 444.3906,307.7669 Q443.6406,307.8919 442.625,307.8919 Q440.7031,307.8919 439.3906,307.095 Q438.0938,306.2825 437.4375,304.8138 Q436.7813,303.3294 436.7813,301.3606 Q436.7813,299.9388 437.1719,298.7669 Q437.5781,297.5794 438.3594,296.7044 Q439.1406,295.8294 440.2813,295.3606 Q441.4219,294.8763 442.8906,294.8763 Q443.8438,294.8763 444.7344,295.0794 Q445.6406,295.2669 446.5781,295.7356 L445.75,297.5169 Q444.9688,297.1419 444.3125,296.9544 Q443.6563,296.7513 442.8594,296.7513 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="64" x="463.25" y="305.876">GridBuilder</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="318.5" x2="639.5" y1="317.22" y2="317.22"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="325.5" y="327.2109"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="48" x="337.5" y="332.9789">Grid grid</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="325.5" y="342.1928"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="103" x="337.5" y="347.9608">Int indexOfNextCell</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="318.5" x2="639.5" y1="355.1838" y2="355.1838"/><ellipse cx="328.5" cy="368.1747" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="167" x="337.5" y="370.9427">GridBuilder setNextCell(Cell cell)</text><ellipse cx="328.5" cy="383.1566" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="173" x="337.5" y="385.9246">GridBuilder nextRow(Int repeats)</text><ellipse cx="328.5" cy="398.1385" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="118" x="337.5" y="400.9065">Position nextPosition()</text><ellipse cx="328.5" cy="413.1204" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="59" x="337.5" y="415.8884">Grid build()</text><ellipse cx="328.5" cy="428.1023" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="297" x="337.5" y="430.8702">GridBuilder configure(GridBuilder builderConfiguration)</text><!--class GridDefinitions--><rect fill="#FEFECE" height="69.9638" id="GridDefinitions" style="stroke: #A80036; stroke-width: 1.5;" width="116" x="675" y="326.67"/><ellipse cx="690" cy="342.67" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M690.1094,338.2013 Q689.1875,338.2013 688.4531,338.5138 Q687.7344,338.8263 687.2344,339.42 Q686.7344,339.9981 686.4531,340.8731 Q686.1875,341.7481 686.1875,342.8419 Q686.1875,344.2794 686.625,345.3263 Q687.0781,346.3731 687.9219,346.92 Q688.7813,347.4669 690.0938,347.4669 Q690.875,347.4669 691.5625,347.3419 Q692.2656,347.2013 693.2656,346.8888 L693.2656,348.7638 Q692.4063,349.0919 691.6406,349.2169 Q690.8906,349.3419 689.875,349.3419 Q687.9531,349.3419 686.6406,348.545 Q685.3438,347.7325 684.6875,346.2638 Q684.0313,344.7794 684.0313,342.8106 Q684.0313,341.3888 684.4219,340.2169 Q684.8281,339.0294 685.6094,338.1544 Q686.3906,337.2794 687.5313,336.8106 Q688.6719,336.3263 690.1406,336.3263 Q691.0938,336.3263 691.9844,336.5294 Q692.8906,336.7169 693.8281,337.1856 L693,338.9669 Q692.2188,338.5919 691.5625,338.4044 Q690.9063,338.2013 690.1094,338.2013 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="84" x="704" y="347.326">GridDefinitions</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="676" x2="790" y1="358.67" y2="358.67"/><ellipse cx="686" cy="371.6609" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="73" x="695" y="374.4289">Grid standard</text><ellipse cx="686" cy="386.6428" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="76" x="695" y="389.4108">Grid endGame</text><!--class TowerPositionManager--><rect fill="#FEFECE" height="54.9819" id="TowerPositionManager" style="stroke: #A80036; stroke-width: 1.5;" width="483" x="825.5" y="334.16"/><ellipse cx="997.75" cy="350.16" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M997.8594,345.6913 Q996.9375,345.6913 996.2031,346.0038 Q995.4844,346.3163 994.9844,346.91 Q994.4844,347.4881 994.2031,348.3631 Q993.9375,349.2381 993.9375,350.3319 Q993.9375,351.7694 994.375,352.8163 Q994.8281,353.8631 995.6719,354.41 Q996.5313,354.9569 997.8438,354.9569 Q998.625,354.9569 999.3125,354.8319 Q1000.0156,354.6913 1001.0156,354.3788 L1001.0156,356.2538 Q1000.1563,356.5819 999.3906,356.7069 Q998.6406,356.8319 997.625,356.8319 Q995.7031,356.8319 994.3906,356.035 Q993.0938,355.2225 992.4375,353.7538 Q991.7813,352.2694 991.7813,350.3006 Q991.7813,348.8788 992.1719,347.7069 Q992.5781,346.5194 993.3594,345.6444 Q994.1406,344.7694 995.2813,344.3006 Q996.4219,343.8163 997.8906,343.8163 Q998.8438,343.8163 999.7344,344.0194 Q1000.6406,344.2069 1001.5781,344.6756 L1000.75,346.4569 Q999.9688,346.0819 999.3125,345.8944 Q998.6563,345.6913 997.8594,345.6913 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="130" x="1018.25" y="354.816">TowerPositionManager</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="826.5" x2="1307.5" y1="366.16" y2="366.16"/><ellipse cx="836.5" cy="379.1509" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="457" x="845.5" y="381.9189">Set[Position] getTowerCells(Map[Position, Cell] cells, Set[TowerPosition] towerPosition)</text><!--class Token--><rect fill="#FEFECE" height="69.9638" id="Token" style="stroke: #A80036; stroke-width: 1.5;" width="85" x="1343.5" y="326.67"/><ellipse cx="1367.05" cy="342.67" fill="#ADD8E6" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1368.0656,349.92 L1366.0188,349.92 L1366.0188,339.1231 L1362.2219,339.1231 L1362.2219,337.2481 L1371.8469,337.2481 L1371.8469,339.1231 L1368.0656,339.1231 L1368.0656,349.92 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="34" x="1382.95" y="347.326">Token</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1344.5" x2="1427.5" y1="358.67" y2="358.67"/><ellipse cx="1354.5" cy="371.6609" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="45" x="1363.5" y="374.4289">String id</text><ellipse cx="1354.5" cy="386.6428" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="59" x="1363.5" y="389.4108">Color color</text><!--class ConcreteToken--><rect fill="#FEFECE" height="114.9094" id="ConcreteToken" style="stroke: #A80036; stroke-width: 1.5;" width="117" x="1327.5" y="498.09"/><ellipse cx="1342.5" cy="514.09" fill="#FFA500" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1345.9688,520.59 L1338.6563,520.59 L1338.6563,507.9181 L1345.9688,507.9181 L1345.9688,509.7931 L1340.7031,509.7931 L1340.7031,513.0588 L1345.6563,513.0588 L1345.6563,514.9181 L1340.7031,514.9181 L1340.7031,518.715 L1345.9688,518.715 L1345.9688,520.59 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="85" x="1356.5" y="518.746">ConcreteToken</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1328.5" x2="1443.5" y1="530.09" y2="530.09"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="50" x="1333.5" y="545.8489">Firebreak</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="20" x="1333.5" y="560.8308">Fire</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="31" x="1333.5" y="575.8127">Water</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="44" x="1333.5" y="590.7946">Reforest</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="33" x="1333.5" y="605.7765">Empty</text><!--class Cell--><rect fill="#FEFECE" height="84.9457" id="Cell" style="stroke: #A80036; stroke-width: 1.5;" width="69" x="1463.5" y="319.18"/><ellipse cx="1485.7" cy="335.18" fill="#FFA500" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1489.1688,341.68 L1481.8563,341.68 L1481.8563,329.0081 L1489.1688,329.0081 L1489.1688,330.8831 L1483.9031,330.8831 L1483.9031,334.1488 L1488.8563,334.1488 L1488.8563,336.0081 L1483.9031,336.0081 L1483.9031,339.805 L1489.1688,339.805 L1489.1688,341.68 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="21" x="1501.3" y="339.836">Cell</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1464.5" x2="1531.5" y1="351.18" y2="351.18"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="57" x="1469.5" y="366.9389">EternalFire</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="36" x="1469.5" y="381.9208">Woods</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="33" x="1469.5" y="396.9027">Tower</text><!--link Grid to BasicGrid--><path d="M774.79,163.88 C651.4,185.34 458.83,225.01 300,285.22 C295.17,287.05 290.31,289.01 285.43,291.08 " fill="none" id="Grid-BasicGrid" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="288.52,297.36,267.41,299.19,282.78,284.6,288.52,297.36" style="stroke: #A80036; stroke-width: 1.0;"/><!--link Grid to GridBuilder--><path d="M774.54,208.87 C729.83,231.83 678.97,257.96 632.19,281.98 " fill="none" id="Grid-GridBuilder" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="627.85,284.21,637.6829,283.6496,632.2961,281.9226,634.0231,276.5358,627.85,284.21" style="stroke: #A80036; stroke-width: 1.0;"/><!--link Grid to GridDefinitions--><path d="M837.34,225.56 C811.99,258.39 783.89,294.76 763.25,321.49 " fill="none" id="Grid-GridDefinitions" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="760.41,325.17,769.0777,320.4933,763.4668,321.2133,762.7469,315.6024,760.41,325.17" style="stroke: #A80036; stroke-width: 1.0;"/><!--link Grid to TowerPositionManager--><path d="M962.66,225.56 C990.45,261.55 1021.54,301.8 1042.49,328.92 " fill="none" id="Grid-TowerPositionManager" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1045.36,332.64,1043.0231,323.0724,1042.3032,328.6833,1036.6923,327.9633,1045.36,332.64" style="stroke: #A80036; stroke-width: 1.0;"/><!--link Grid to Token--><path d="M1025.17,165.89 C1114.98,185.8 1235.6,222.17 1326,285.22 C1339.69,294.77 1351.82,308.33 1361.53,321.33 " fill="none" id="Grid-Token" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1364.38,325.24,1362.3396,315.6048,1361.4468,321.1908,1355.8609,320.2979,1364.38,325.24" style="stroke: #A80036; stroke-width: 1.0;"/><!--link Grid to Cell--><path d="M1025.28,151.82 C1143.2,164.19 1320.01,197.2 1446,285.22 C1456.65,292.65 1465.79,303.02 1473.31,313.69 " fill="none" id="Grid-Cell" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1476.02,317.69,1474.2944,307.9935,1473.2202,313.5474,1467.6663,312.4732,1476.02,317.69" style="stroke: #A80036; stroke-width: 1.0;"/><!--link Token to ConcreteToken--><path d="M1386,418.42 C1386,443.42 1386,472.87 1386,497.97 " fill="none" id="Token-ConcreteToken" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="1379,418.47,1386,398.47,1393,418.47,1379,418.47" style="stroke: #A80036; stroke-width: 1.0;"/><!--
@startuml
hide empty members
skinparam shadowing false

package model.gameboard.grid {
  class Grid << (T,lightblue) companion object >> {
    +Map[Position, Cell] cells
    +Map[Position, Token] tokens
    +Option[Cell] getCell(Position position)
    +Option[Token] getToken(Position position)
    +Grid setCell(Position position, Cell cell)
    +Grid setTokens((Position, Token)... tokens)
    +Grid update((Position, Cell)... updates)
  }

  class BasicGrid {
    -Map[Position, Cell] _cells
    -Map[Position, Token] _tokens
    +Map[Position, Cell] cells
    +Map[Position, Token] tokens
    +Boolean isValidPosition(Position position)
  }

  class GridBuilder {
      -Grid grid
      -Int indexOfNextCell
      +GridBuilder setNextCell(Cell cell)
      +GridBuilder nextRow(Int repeats)
      +Position nextPosition()
      +Grid build()
      {static} +GridBuilder configure(GridBuilder builderConfiguration)
    }

  class GridDefinitions {
    {static} +Grid standard
    {static} +Grid endGame
  }

  class TowerPositionManager {
    {static} +Set[Position] getTowerCells(Map[Position, Cell] cells, Set[TowerPosition] towerPosition)
  }

  class Grid {
  }

  class Token << (T,lightblue) >> {
    +String id
    +Color color
  }

  enum ConcreteToken << (E, orange) >> {
    Firebreak
    Fire
    Water
    Reforest
    Empty
  }

  enum Cell << (E, orange) >> {
    EternalFire
    Woods
    Tower
  }

  Grid - -|> BasicGrid
  Grid - -> GridBuilder
  Grid - -> GridDefinitions
  Grid - -> TowerPositionManager
  Grid - -> Token
  Grid - -> Cell
  Token <|- - ConcreteToken
}

@enduml

PlantUML version 1.2019.06(Fri May 24 19:10:25 CEST 2019)
(APACHE source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 21.0.3+9-LTS
Operating System: Linux
OS Version: 6.10.6-200.fc40.x86_64
Default Encoding: UTF-8
Language: it
Country: IT
--></g></svg>